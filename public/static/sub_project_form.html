<div class="row">
  <div class="col-lg-12" ng-show="messageAlert">
    <div class="alert">
      <button type="button" class="close" data-dismiss="alert">×</button>
      <strong>Warning!</strong>  {{messageAlert}}

    </div>
  </div>
</div>

<div class="row">
  <div class="col-lg-12">
    <h1 class="page-header">Project Sub Form</h1>
  </div>
 <!-- /.col-lg-12 -->
</div>

<div class="row">
  <div class="col-lg-12">
    <div class="alert alert-success">
      <div class="row">
        <div class="col-xs-3">
          <i class="fa fa-file-text-o fa-5x"></i>
        </div>
        <div class="col-xs-9 text-right">
          <div class="medi">
            {{project.pid}} : 
            <a href="#/project/finance/info/{{project._id}}/{{project.financeid}}">{{project.name}} </a>
            <a href="#/project/finance/edit/{{project._id}}/{{project.financeid}}">
            <span class="glyphicon glyphicon-edit"></span></a>
            <a href=""  ng-click="createMessage()" ><span class="glyphicon glyphicon-plus"></span></a>   
    </p>
          </div>
          <div>
            ผู้รับผิดชอบ {{project.owner}}
            | สถานะโครงการ {{project.status}}
          </div>
          <div>
            เอกสารขออนุมัติ
           <a href="{{project.permitdocument}}"
              target="_blank">
              <span class="glyphicon glyphicon-download"></span>
           </a>
          </div>
          <div>
             <a class ="alert-link" href="#/project/finance/info/{{project._id}}/{{project.financeid}}">
                   <button type="button"
                      class="btn btn-primary btn-circle">
                      <i class="fa fa-info-circle"></i>
                   </button>
             </a><a class="alert-link" href="#/project/finance/edit/{{project._id}}/{{project.financeid}}">
              <button type="button"class="btn btn-warning btn-circle"><i class="fa fa-pencil"></i></button></a>

          </div>

        </div>
      </div>
    </div>
  </div>
</div>
<br>


<div class="row">
  <div class="col-lg-12">
    <table class="table table-condensed table-bordered" >
      <tr>
              <th >ชื่อโครงการ/กิจกรรมย่อย</th>
              <th >วันที่ขออนุมัติ</th>
              <th >วันที่จัด</th>
              <th>สถานะ</th>
      </tr>
      <tr ng-repeat="message in subproject_list" ng-show="message.project_id==project._id">
        <td>
          <a href="" ng-click="editField(message._id)">{{message.subname}}</a>

          <a href="" ng-click="remove_message(message._id)"><span class="glyphicon glyphicon-remove-circle"></span></a>
        </td>
        <td>{{message.date_approval}}</td>
        <td>{{message.date_manage}}</td>
        <td>{{message.substatus}}</td>
            <!--<td ng-show="user.user">
            <td >
              <a href="" ng-click="editField(message._id)">
                <i class="icon-edit"></i>
              </a>
              <a href="" ng-click="remove_message(message._id)">
                <i class="icon-remove"></i>
              </a>
            </td>
            -->
      </tr>
    </table>
  </div>
</div>

<div class="row">
  <div class="col-lg-12">
    <div class="row">
      <div class="col-xs-3">
      </div>
      <div class="col-xs-9 text-right">
        <p>
         <small> <span class="label label-primary"> A </span> = กองทุนทั่วไป</small>
         <small> <span class="label label-primary"> B </span> = กองทุนกิจการนิสิต</small>
          <span class="label label-primary"><small> C </span> = กองทุนวิจัย</small>
          <span class="label label-primary"><small> D </span> = กองทุนทำนุบำรุงศิลปวัฒนธรรม</small>
          <span class="label label-primary"><small> E </span> = กองทุนบริการวิชาการ</small>
        <p>
      </div>
    </div>
  </div>
</div>
<span  ng-show="selectMessage">
  <div class="panel panel-default">
    <div class="panel-heading">
      บันทึกผลการดำเนินงานโครงการ/กิจกรรม
    </div>
    <!-- /.panel-heading -->
    <div class="panel-body">
      <form class="form-horizontal">

        <div class="form-group">
           <label for="inputProjectname" class="col-sm-2 control-label">ชื่อโครงการ</label>
           <div class="col-sm-10">
             <input type="text"
               class="form-control"
               id="inputName" placeholder="Name"
               ng-model="subproject.subname" >
           </div>
        </div>
        <div class="form-group">
          <label for="inputStatus" class="col-sm-2 control-label">สถานภาพโครงการ</label>
          <div class="col-sm-10">
            <select id="inputStatus"
              class="form-control"
              placeholder="Status" ng-model="subproject.substatus">
              <option ng-selected="subproject.substatus=='ยังไม่ได้ดำเนินการ'">ยังไม่ได้ดำเนินการ</option>
              <option ng-selected="subproject.substatus=='กำลังดำเนินการ'">กำลังดำเนินการ</option>
              <option ng-selected="project.substatus=='ดำเนินการแล้ว'">ดำเนินการแล้ว</option>
              <option ng-selected="project.substatus=='ยกเลิก'">ยกเลิก</option>
            </select>
          </div>
        </div>

        <div class="form-group" >
          <label for="inputPsub" class="col-sm-2 control-label">ลักษณะการรายงาน</label>
            <div class="col-sm-10">
              <select id="inputPtypeinfo"
                class="form-control"
                ng-model="subproject.ptypeinfo">
                <option ng-selected="subproject.ptypeinfo=='กรอกข้อมูลพื้นฐาน'">กรอกข้อมูลพื้นฐาน</option>
                <option ng-selected="subproject.ptypeinfo=='ขออนุมัติโครงการ'">ขออนุมัติโครงการ</option>
                <option ng-selected="subproject.ptypeinfo=='รายงานผล'">รายงานผล</option>
              </select>
            </div>
        </div>

          <div class="alert alert-danger" role="alert" ng-show="messageValidate">
            <button type="button" class="close" data-dismiss="alert">×</button>
            <strong>Warning!</strong>  {{messageValidate}}
          </div>

      </form>
    </div>
  </div>

  <span ng-show="subproject.ptypeinfo == 'กรอกข้อมูลพื้นฐาน'">
    <div class="panel panel-default">
      <div class="panel-heading">
        <div class="row">
          <div class="col-xs-6">
            <strong>วัตถุประสงค์ เป้าหมาย ตัวชี้วัด วิธีการวัดผล</strong>
          </div>
          <div class="col-xs-6 text-right"></div>
        </div>
      </div>

      <div class="panel-body">
        <form class="form-horizontal">
          <div class="form-group">
            <label class="control-label col-sm-2"
              for="inputName">วัตถุประสงค์ของโครงการ: </label>
            <div class="col-sm-10">
              <textarea class="form-control"
                rows="5" class="form-control"
                ng-model="subproject.objectiveinfo"></textarea>
            </div>
          </div>
          <div class="form-group">
            <label class="control-label col-sm-2"
              for="inputName">เป้าหมายของโครงการ: </label>
            <div class="col-sm-10">
              <textarea class="form-control"
                rows="3" class="form-control"
                ng-model="subproject.targetinfo"></textarea>
            </div>
          </div>
          <span ng-hide="project.typeoutput== 'อื่นๆ'">
            <div class="form-group">
              <label class="control-label col-sm-2" for="inputName">เป้าหมายผู้เข้าร่วม(คน): </label>
              <div class="col-sm-10">
                <input type="text" id="inputName"
                  class="form-control"
                  placeholder="เป้าหมายผู้เข้าร่วมโครงการ" 
                  ng-model="subproject.partytarget">
              </div>
            </div>
          </span>

          <div class="form-group">
            <label class="control-label col-sm-2" for="inputName">ตัวชี้วัดเชิงปริมาณ: </label>
            <div class="col-sm-10">
              <input type="text" id="inputName"
                class="form-control"
                placeholder="กรอกข้อมูลตัวชี้วัดเชิงปริมาณ" 
                ng-model="subproject.kpiquantity">
            </div>
          </div>

          <div class="form-group">
            <label class="control-label col-sm-2" for="inputName">ตัวชี้วัดเชิงคุณภาพ: </label>
            <div class="col-sm-10">
              <textarea class="form-control" rows="3"
                placeholder="กรอกข้อมูลตัวชี้วัดเชิงคุณภาพ"
                ng-model="subproject.kpiquality"></textarea>
            </div>
          </div>

        </form>
      </div>
    </div>
  </span>


  <span ng-show="subproject.ptypeinfo == 'ขออนุมัติโครงการ'">
    <div class="panel panel-warning">
      <div class="panel-heading">
        <div class="row">
          <div class="col-xs-6">
            <strong>ข้อมูลความก้าวหน้า</strong>
          </div>
          <div class="col-xs-6 text-right"></div>
        </div>
      </div>
      <div class="panel-body">
        <form class="form-horizontal">
          <div class="form-group">
            <label class="control-label col-sm-2" for="inputApproval">วันเดือนปีที่ขออนุมัติ(โครงการหลัก): </label>
            <div class="col-sm-10">
              <input type="text" ng-model="subproject.date_approval"
                class="form-control"
                data-date-format="dd/mm/yyyy" bs-datepicker>
            </div>
          </div>
          <div class="form-group">
            <label class="control-label col-sm-2" for="inputPermit">เอกสารการขออนุมัติ: </label>
            <div class="col-sm-10">
              <input type="text" id="inputPermit"
                class="form-control"
                placeholder="ที่อยู่ลิงค์ของเอกสารการขออนุมัติโครงการ" 
                ng-model="subproject.permitdocument">
            </div>
          </div>
          <div class="form-group">
            <label class="control-label  col-sm-2" for="inputName">วันเดือนปีที่จัด(ล่าสุด): </label>
            <div class="col-sm-10">
              <input type="text" ng-model="subproject.date_manage"
                class="form-control"
                data-date-format="dd/mm/yyyy" bs-datepicker>
            </div>
          </div>

          <div class="form-group">
            <label class="control-label  col-sm-2" for="inputName">ถึง วันที่: </label>
            <div class="col-sm-10">
              <input type="text" ng-model="subproject.end_date_manage"
                class="form-control"
                data-date-format="dd/mm/yyyy" bs-datepicker>
            </div>
          </div>
          <div class="form-group">
            <label class="control-label col-sm-2" for="inputPlace">สถานที่จัดโครงการ: </label>
            <div class="col-sm-10">
              <input type="text" id="inputPlace"
                class="form-control"
                placeholder="กรอกสถานที่จัดโครงการ" ng-model="subproject.place">
            </div>
          </div>
        </form>
      </div>
    </div>
  </span>
  <span ng-show="subproject.ptypeinfo == 'รายงานผล'">
    <div class="panel panel-info">
      <div class="panel-heading">
        <div class="row">
          <div class="col-xs-6">
            <strong>รายงานผลประเมินโครงการ/กิจกรรม</strong>
          </div>
          <div class="col-xs-6 text-right"></div>
        </div>
      </div>

      <div class="panel-body">
        <form class="form-horizontal">
          <div class="form-group">
            <label class="control-label col-sm-2" for="inputName" >เครื่องมือในการวัดผล: </label>
            <div class="col-sm-10">
              <select id="inputName"
                class="form-control"
                ng-model="subproject.typeoutput">
                <option ng-selected="subproject.typeoutput=='แบบประเมินความพึงพอใจ'">แบบประเมินความพึงพอใจ</option>
                <option ng-selected="subproject.typeoutput=='อื่นๆ'">อื่นๆ</option>
              </select>
            </div>
          </div>

          <div class="form-group">
            <label class="control-label col-sm-2" for="inputName">วันเดือนปีที่รายงาน: </label>
            <div class="col-sm-10">
              <input type="text" ng-model="subproject.date_report"
                class="form-control"
                data-date-format="dd/mm/yyyy" bs-datepicker>
            </div>
          </div>
          <div class="form-group">
            <label class="control-label col-sm-2" for="inputName">
             วัตถุประสงค์ของโครงการ(ผลดำเนินการ): </label>
            <div class="col-sm-10">
              <select id="inputName" placeholder="object" class="form-control"
                ng-model="subproject.object">
                <option ng-selected="subproject.object=='บรรลุวัตถุประสงค์'">บรรลุวัตถุประสงค์</option>
                <option ng-selected="subproject.object=='ไม่บรรลุวัตถุประสงค์'">ไม่บรรลุวัตถุประสงค์</option>
              </select>
            </div>
          </div>
          <div class="form-group">
            <label class="control-label col-sm-2" for="inputName">เป้าหมายของโครงการ(ผลดำเนินการ): </label>
            <div class="col-sm-10">
              <select id="inputName" placeholder="goal"
                class="form-control"
                ng-model="subproject.goal">
                <option
                  ng-selected="subproject.goal=='บรรลุเป้าหมาย'">บรรลุเป้าหมาย</option>
                <option
                  ng-selected="subproject.goal=='ไม่บรรลุเป้าหมาย'">ไม่บรรลุเป้าหมาย</option>
              </select>
            </div>
          </div>

          <div class="form-group">
            <label class="control-label col-sm-2" for="inputName">
            ตัวชี้วัดของโครงการ(ผลดำเนินการ): </label>
            <div class="col-sm-10">
              <select id="inputName"
                class="form-control"
                placeholder="kpi" ng-model="subproject.kpi">
                <option ng-selected="subproject.kpi=='เป็นไปตามตัวชี้วัด'">เป็นไปตามตัวชี้วัด</option>
                <option ng-selected="subproject.kpi=='ไม่เป็นไปตามตัวชี้วัด'">ไม่เป็นไปตามตัวชี้วัด</option>
              </select>
            </div>
          </div>
          <div class="form-group">
            <label class="control-label col-sm-2" for="inputName">ประโยชน์ที่ได้รับจากการจัดโครงการ: </label>
            <div class="col-sm-10">
              <textarea class="form-control" rows="5"
                placeholder="กรอกข้อมูลประโยชน์ที่ได้รับ"
                ng-model="subproject.advantage"></textarea>
            </div>
          </div>

          <div class="form-group">
            <label class="control-label col-sm-2" for="inputName">อุปสรรค/ปัญหา(ถ้ามี): </label>
            <div class="col-sm-10">
              <input type="text" id="inputName"
                class="form-control"
                placeholder="กรอกอุปสรรค/ปัญหา(ถ้ามี)" ng-model="subproject.problem">
            </div>
          </div>
        </form>
      </div>
    </div>
  </span>


<span ng-show="subproject.ptypeinfo == 'รายงานผล'">
  <span ng-hide="subproject.typeoutput== 'อื่นๆ'">
    <div class="panel panel-info">
      <div class="panel-heading">
        <div class="row">
          <div class="col-xs-6">
            <strong>รายงานผลประเมินความพึงพอใจ</strong>
          </div>
          <div class="col-xs-6 text-right"></div>
        </div>
      </div>
      <div class="panel-body">
        <form class="form-horizontal">
          <div class="form-group">
            <label class="control-label col-sm-2" for="inputName">จำนวนผู้เข้าร่วม(คน): </label>
            <div class="col-sm-10">
              <input type="text" id="inputName"
                class="form-control"
                placeholder="กรอกจำนวนผู้เข้าร่วมโครงการจริง" 
                ng-model="subproject.party">
            </div>
          </div>

          <div class="form-group">
            <label class="control-label col-sm-2" for="inputName">จำนวนผู้ตอบแบบสอบถาม(คน): </label>
            <div class="col-sm-10">
              <input type="text" id="inputName"
                class="form-control"
                placeholder="กรอกจำนวนผู้ตอบแบบสอบถาม" 
                ng-model="subproject.respon">
            </div>
          </div>
          <div class="form-group">
            <label class="control-label col-sm-2" for="inputName">ค่าเฉลี่ยของผู้ตอบแบบสอบถาม: </label>
            <div class="col-sm-10">
              <input type="text" id="inputName"
                class="form-control"
                placeholder="percent"
                ng-model="subproject.percent"
                value = "{{((subproject.respon*100)/subproject.party|number:2).toString()}}">
            </div>
          </div>

          <div class="form-group">
            <label class="control-label col-sm-2" for="inputName">ระดับความพึงพอใจ: </label>
            <div class="col-sm-10">
              <input type="text" id="inputName"
                class="form-control"
                placeholder="กรอกระดับความพึงพอใจ" 
                ng-model="subproject.sd">
            </div>
          </div>

          <div class="form-group">
            <label class="control-label col-sm-2" for="inputName">ร้อยละค่าเฉลี่ย: </label>
            <div class="col-sm-10">
              <input type="text" id="inputName"
                class="form-control"
                placeholder="average"
                ng-model="subproject.average" >
            </div>
          </div>
          <div class="form-group">
            <label class="control-label col-sm-2" for="inputName">ที่อยู่เอกสารรายงานผลโครงการ: </label>
            <div class="col-sm-10">
              <input type="text" id="inputName"
                class="form-control"
                 placeholder="http://www.db.grad.nu.ac.th/django/officers/projectassessment/"
                 ng-model="subproject.Load">
              <a href="{{subproject.load}}" ng-show="subproject.load"> ไฟล์โครงการ</a>
            </div>
          </div>
        </form>
      </div>
    </div>
  </span>
</span>

      <div class="input-append">
        <button type="button" class="btn btn-danger "
          ng-click="del()" ng-show="project">
          <i class="icon-remove icon-white"></i>
          ลบข้อมูลโครงการ
        </button>
        <button type = "button"
          class="btn btn-primary" type="submit" ng-click="subProjectSave()">
          <i class="icon-ok"></i> บันทึกข้อมูล
        </button>
      </div>


</span>




<!------------->



 <!------ 
  <div class="span12">  
    <div class="row-fluid">
      <div class="span6" >
      </div>
      <div class="span6" ng-show="selectMessage">
        <div class="row-fluid">
          <div class="span12">
            <div class="tabbable"> 
              <ul class="nav nav-tabs">
                <li class="active"><a href="#tab1" data-toggle="tab">ผลการดำเนินงาน</a></li>
                <li><a href="#tab2" data-toggle="tab">รายละเอียดโครงการ</a></li>
              </ul>
              <div class="tab-content">
                <div class="tab-pane active"   id="tab1">
                  <fieldset>
                    <legend>ผลการดำเนินงาน</legend>
                    
                    <label>วันที่: </label>
                    <div class="input-append" >
                      <input type="text" ng-model="message.date_record" 
                        data-date-format="dd/mm/yyyy" bs-datepicker>
                      <button type="button" class="btn" data-toggle="datepicker">
                        <i class="icon-calendar"></i>
                      </button>
                    </div>
                    
                    <label>ผลการดำเนินงาน : </label>
                    <div ng-model="message.task_name" mode="text"  codemirror="text">
                      <textarea></textarea>
                    </div>  
                    
                    <span class="pull-left ">  
                      <a href="" ng-click="messageSave()" class="btn btn-primary" 
                        ng-show="selectMessage"> <i class="icon-ok icon-white">
                        </i> Save 
                      </a>  
                      <a href="" class="btn" ng-click="createMessage()" >
                        <i class="icon-plus"></i> New Message
                      </a>      
                    </span>  
                  </fieldset> 
                </div>
                <div class="tab-pane"   id="tab2">
                  <div ng-include src="views.project_form"></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    
  </div>
</div>
    
-->
